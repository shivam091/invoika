= label_tag :selections, "", class: "form-label", data: {select_all_checkbox_target: "count"}
.table-responsive
  %table.table.table-striped
    %thead
      %tr
        %th{width: "25px", scope: "col"}#
        - if @taxes&.count > 0
          %th{width: "25px", scope: "col"}
            = check_box_tag "checkbox", nil, false, class: "form-check-input", data: {select_all_checkbox_target: "selectAllCheckbox"}
        %th{scope: "col"}= t(".name")
        %th{scope: "col"}= t(".rate")
        %th{scope: "col"}= t(".type")
        %th{width: "25px", scope: "col"}= t(".actions")
    %tbody
      - if @taxes&.each.with_index(1) do |tax, index|
        %tr
          %td.fw-bold
            = (@pagy.offset + index)
          %td
            = check_box_tag "tax_ids[]", tax.id, false, class: "form-check-input", data: {select_all_checkbox_target: "checkbox"}
          %td.fw-bold= tax.name
          %td= number_to_percentage(tax.rate, precision: 2)
          %td= enum_i18n(::Tax, :types, tax.type)
          %td.actions
            = link_to "javascript:void(0)", class: "text-default", data: {bs_toggle: "dropdown"}, aria: {expanded: false} do
              = external_svg_tag("svgs/ellipsis-vertical.svg")
            %ul.dropdown-menu
              - if policy(tax).update?
                %li
                  = link_to edit_tax_path(tax), class: "dropdown-item" do
                    = external_svg_tag("svgs/pencil.svg")
                    = button_text("edit")
              - if tax.is_active? && policy(tax).deactivate?
                %li
                  = link_to confirm_deactivate_tax_path(tax), class: "dropdown-item", data: {turbo_frame: :remote_modal} do
                    = external_svg_tag("svgs/archive.svg")
                    = button_text("deactivate")
              - if !tax.is_active? && policy(tax).activate?
                %li
                  = link_to confirm_activate_tax_path(tax), class: "dropdown-item", data: {turbo_frame: :remote_modal} do
                    = external_svg_tag("svgs/unarchive.svg")
                    = button_text("activate")
              - if policy(tax).destroy?
                %li
                  = link_to confirm_destroy_tax_path(tax), class: "dropdown-item dropdown-item-danger", data: {turbo_frame: :remote_modal} do
                    = external_svg_tag("svgs/trash.svg")
                    = button_text("delete")
      - end.empty?
        %tr
          %td.no-data{colspan: ::Tax.columns.count}
            - if current_action?("active")
              = t(".no_active_taxes_to_display")
            - elsif current_action?("inactive")
              = t(".no_inactive_taxes_to_display")
            - else
              = t(".no_taxes_to_display")
